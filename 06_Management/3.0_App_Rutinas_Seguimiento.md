# 3.0 App, Rutinas y Seguimiento

## üéØ Objetivo General

Centralizar y estabilizar toda la l√≥gica de **rutinas**, **PDFs**, **seguimiento del paciente** y **RoutinesAgent**, garantizando una experiencia s√≥lida en app y panel.

---

# 1. NUEVAS √âPICAS PRINCIPALES

## _(CANCELADA)_ 1.1. PDFs de Rutinas (Profesional + Legible)

### Problemas actuales

- Formato b√°sico / sin estilo.
- No incluye descansos, series y repeticiones correctamente.
- No refleja estructura semanal.
- No se integra con la app.

### Entregables

- Template PDF profesional.
- Layout semanal claro.
- Datos del paciente / especialista.
- Exportaci√≥n desde backend y panel.

### Tareas

- [ ] Template PDF profesional. _(Erick)_
- [ ] Endpoint para generar PDF por semana. _(Erick)_
- [ ] Integraci√≥n visual en frontend para descarga. _(Diego)_
- [ ] Integraci√≥n con app (solo definici√≥n t√©cnica). _(Miguel ‚Üí Pandalatec)_

---

## _(Por confirmar)_ 1.2. Asignaci√≥n de Series de Ejercicios por Semana

### Problemas actuales

- No existe una estructura clara para la asignaci√≥n de series por d√≠a/semana.
- No existen validaciones ni DTO unificados.

### Entregables

- Definici√≥n de estructura est√°ndar de series por semana.
- Asociaci√≥n ejercicio ‚Üê‚Üí serie ‚Üê‚Üí d√≠a.
- _(Nice-to-have)_ Validaciones cl√≠nicas: volumen, intensidad, descansos.
- DTO final y compatible con RoutinesAgent.

### Tareas

- [ ] Definir modelo y DTO final de series. _(Erick)_
- [ ] Endpoint para asignar series por semana. _(Erick)_
- [ ] Validaciones de repeticiones, descansos, volumen. _(Erick)_
- [ ] UI para edici√≥n de series. _(Diego)_
- [ ] Ajustes en PDF para mostrar series correctamente. _(Erick)_

---

## _(Nice-to-have)_ 1.3. Selecci√≥n de M√∫sculos "2D" en la Creaci√≥n de Series

### Problemas

- Mejorar la selecci√≥n de grupos musculares.

### Entregables

- Selector visual de m√∫sculos.

### Tareas

- [ ] Dise√±o de componente visual de selecci√≥n. _(Diego)_
- [ ] Crear componente visual de selecci√≥n. _(Diego)_

---

## _(Exploratorio / Por confirmar)_ 1.4. Registro de M√©tricas y Tiempos del Paciente

### Problemas / Consideraciones

- A√∫n no se define si el sistema medir√° pesos usados, tiempos, descansos, etc.
- Implicar√≠a cambios importantes en infraestructura, app y panel.
- Podr√≠a habilitar un modelo de progresi√≥n autom√°tica en el futuro.

### Entregables si se aprueba

- Endpoints para registrar m√©tricas por ejercicio y serie.
- Modelo progresivo para adaptar rutinas a partir del desempe√±o.
- Dashboard simple para especialistas.

### Tareas

- [ ] Revisar con Andr√©s si este m√≥dulo se implementar√°. _(Miguel)_
- [ ] Dise√±ar flujo t√©cnico. _(Miguel + Samuel)_
- [ ] Endpoints de registro (weights, RPE, tiempos). _(Erick + Samuel)_
- [ ] UI para visualizaci√≥n b√°sica. _(Diego)_

---

## _(Por confirmar)_ 1.5. Entrenamiento Guiado (APP / posible Web)

Este proceso se desarrollar√° en APP m√≥vil por Pandalatec, pero deben definirse reglas, endpoints y dise√±o.

### Flujo esperado del usuario

- Ver rutina diaria ordenada por d√≠a y grupo muscular.
- Iniciar / finalizar cada serie o ejercicio manualmente.
- Si hay descanso:
  - Cron√≥metro autom√°tico.
  - Notificaci√≥n al finalizar.
- Marcar ejercicio como completado sin cron√≥metro.
- Ver descripciones, accesorios, im√°genes y videos.
- Sustituir ejercicios por equivalencias sugeridas.
- Registrar autom√°ticamente tiempos de ejecuci√≥n y descanso.

### Entregables

- Endpoints necesarios para registrar progreso. _(Samuel + Erick)_
- Vista equivalente en Web (pendiente a validaci√≥n). _(Diego)_

### Tareas

- [ ] Validar con Andr√©s si se construir√° (APP / APP+Web). _(Miguel)_
- [ ] Endpoints: inicio/fin de series, sustituci√≥n, cron√≥metro. _(Samuel + Erick)_
- [ ] UI Web en caso de aprobarse. _(Diego)_

---

## 1.6. RoutinesAgent (Generaci√≥n + Edici√≥n)

### Problemas

- No existe l√≥gica estable para IA.
- No hay modelo cl√≠nico de rutinas (fuerza, cardio, movilidad).
- Falta editor manual avanzado.

### Entregables

- RoutinesAgent funcional.
- Generaci√≥n autom√°tica por objetivo.
- Edici√≥n granular (`actions`).
- Integraci√≥n completa con app.

### Tareas

- [ ] Modelo IA para rutinas. _(Samuel)_
- [ ] Endpoint generate automatic. _(Samuel)_
- [ ] Endpoint actions (edici√≥n granular). _(Samuel)_
- [ ] UI del editor visual. _(Diego)_
- [ ] Trazabilidad de cambios. _(Samuel)_

---

## _(Por confirmar)_ 1.7. Seguimiento de entrenamientos del Paciente (APP)

### Problemas

- App no tiene rutinas completas.
- No existe progreso ni m√©tricas.
- No existe historial de acciones.

### Entregables

- Rutinas visibles desde app.
- Marcar ejercicios completados.
- Progreso semanal.
- Notificaciones push (v√≠a Pandalatec).

### Tareas

- [ ] Endpoints seguimiento. _(Samuel + Erick)_
- [ ] Endpoint ‚Äúcomplete exercise‚Äù. _(Erick)_
- [ ] UI app (coordinaci√≥n con Pandalatec). _(Miguel)_
- [ ] Gr√°ficas de progreso en panel. _(Diego)_

---

# 2. DEPENDENCIAS

1. PDFs dependen de la estructura final de series.
2. RoutinesAgent depende de la asignaci√≥n de series + DTO final.
3. App depende del dise√±o funcional del proceso semi-manual.
4. Registro de m√©tricas depende del proceso semi-manual.

---

# 3. ASIGNACI√ìN POR ROL

### **Samuel**

- Backend completo del RoutinesAgent
- Endpoints de series
- Endpoints seguimiento
- Edici√≥n granular

### **Erick**

- Validaciones
- Modelos y migraciones
- Endpoints secundarios
- Registro de m√©tricas (si aplica)
- Soporte a Samuel

### **Diego**

- Todo el frontend
- Editor IA
- Edici√≥n de series
- Vistas de progreso
- Vistas Web del proceso semi-manual (si se aprueba)

### **Antoine**

- PDF de rutinas
- UX y dise√±o de series, selecci√≥n de m√∫sculos
- Flujos del proceso semi-manual

### **Miguel**

- Arquitectura DTO
- Dise√±o funcional del proceso semi-manual
- Coordinaci√≥n con Pandalatec
- Reglas cl√≠nicas y progresiones IA

### **Leo**

- QA completo de rutinas
- QA de PDF
- QA de seguimiento

---

# 4. STORY POINTS (Por revisar en Grooming)

| √âpica                                | SP Tentativo |
| ------------------------------------ | ------------ |
| PDFs                                 | 20           |
| Asignaci√≥n de series                 | 24           |
| Selecci√≥n de m√∫sculos (NTH)          | 8            |
| RoutinesAgent                        | 34           |
| Seguimiento App                      | 20           |
| Proceso semi-manual (por confirmar)  | 16‚Äì40        |
| Registro de m√©tricas (por confirmar) | 20           |

> Total variable seg√∫n aprobaci√≥n del proceso semi-manual y m√©tricas.

---

# 5. RIESGOS (Actualizados)

- Definici√≥n tard√≠a del proceso semi-manual puede alterar sprints.
- Pandalatec agrega dependencia externa y retrasos potenciales.
- Selecci√≥n de m√∫sculos puede inflar UI si no se controla alcance.
- Registro de m√©tricas implica redise√±ar parte del modelo.
- PDFs requieren estructura final del DTO de rutinas.

---

# 6. DOCUMENTACI√ìN ACTUALIZADA

- `/doc/routines-agent.md`
- `/doc/pdf-routines.md`
