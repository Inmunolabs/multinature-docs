# [17] Especialistas

## [17.1] Configuraciones de especialistas

- [17005] Crear la tabla de configuraciones de especialista
  Contexto:
  **Nombre de la Tabla**: `specialist_settings`
  **Nombres de las Columnas**:
  | Nombre en Español | Nombre en Inglés | Tipo de Dato | Valor por Defecto |
  |-----------------------------------|--------------------------------|-------------------|-------------------|
  | Cobro de anticipo de consulta | `charge_advance_payment` | `BOOLEAN` | `FALSE` |
  | Cobro de consulta | `charge_per_consultation` | `BOOLEAN` | `FALSE` |
  | Cobro mensual | `monthly_charge` | `BOOLEAN` | `FALSE` |
  | Recibir correos | `receive_emails` | `BOOLEAN` | `TRUE` |
  **Posible Código SQL para Crear la Tabla**:
  Verificarlo bien

  ```sql
  CREATE TABLE specialist_settings (
      specialist_id VARVHAR(36) PRIMARY KEY,
      charge_advance_payment BOOLEAN DEFAULT FALSE,
      charge_per_consultation BOOLEAN DEFAULT FALSE,
      monthly_charge BOOLEAN DEFAULT FALSE,
      receive_emails BOOLEAN DEFAULT TRUE,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
      FOREIGN KEY (specialist_id) REFERENCES users(id) ON DELETE CASCADE
  );
  ```

  **Explicación de la Estructura**:

  1. `specialist_id`: Relación con la tabla `specialists` (asumiendo que existe).
  2. `charge_advance_payment`: Define si se cobra un anticipo para la confirmación de citas.
  3. `charge_per_consultation`: Define si se cobra por consulta desde el sistema.
  4. `monthly_charge`: Indica si hay un cobro mensual por paciente.
  5. `receive_emails`: Indica si el especialista recibe o deja de recibir correos.

- [17006] Crear endpoint para la creación de configuraciones de especialista
  Contexto: El endpoint `POST {{usersHost}}/specialists/:id` debe crearse desde el users-api en un nuevo router `specialist.js` y debe permitir la creación de configuraciones de especialista persistiendo
  // TODO

- [17006] Crear flujo para actualización de usuario a especialista
  Contexto: El flujo conlleva varios puntos que pueden ser divididos hasta en seis pasos
  // TODO

  - Cobro de anticipo de consulta. `charge_advance_payment`: Define si se cobra un anticipo para la confirmación de citas.
  - Cobro de consulta. `charge_per_consultation`: Define si se cobra por consulta desde el sistema.
  - Cobro mensual. `monthly_charge`: Indica si hay un cobro mensual por paciente.
  - Recibir correos. `receive_emails`: Indica si el especialista recibe o deja de recibir correos.
    Esta tarea incluye el acceso a esta vista, el maquetado de la misma y el consumo del endpoint

- [17006] Crear vista para actualizar las configuraciones de un especialista
  Contexto: La vista debe tener la opción para actualizar las siguientes configuraciones:
  // TODO
  - Cobro de anticipo de consulta. `charge_advance_payment`: Define si se cobra un anticipo para la confirmación de citas.
  - Cobro de consulta. `charge_per_consultation`: Define si se cobra por consulta desde el sistema.
  - Cobro mensual. `monthly_charge`: Indica si hay un cobro mensual por paciente.
  - Recibir correos. `receive_emails`: Indica si el especialista recibe o deja de recibir correos.
    Esta tarea incluye el acceso a esta vista, el maquetado de la misma y el consumo del endpoint
